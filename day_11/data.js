const data = `........................................#........#.............#............#.........#................................................#....
....#.............................................................................................................................#.........
....................#...................................#......................................#.........................#..................
............................................................................................................................................
#..........#.....................#...............................................................................#..........................
......................................................................................................#.....................#...............
........................#..................................#.............................#..................................................
............................................#.........................#..........#............#.........................#...............#...
...#..........................#.......................#......................................................#..............................
............#...............................................................................................................................
..................................................................................................#.........................................
.........................#..................................................#...............................................................
.....................................#..............................................#..................#...................#................
...............................................#.......................#....................................#...............................
..#...............................................................#...............................................................#.........
..................#.............................................................#.........#........................#........................
.......................................#..............#......#..............................................................................
.............................#........................................................#.........#.............................#.............
...................................#....................................................................#................#...............#..
...#........................................#...............................................................................................
........................................................................#..................#................................................
...........#........................................................................#...............................#.......#...............
................#...........................................#..............................................#................................
............................................................................................................................................
......................#.......#.........#.........#................#...................................#..............................#.....
.........#....................................................................#.............................................................
..................................#..........#............#..............#..................#......#........................................
............................................................................................................................................
...................................................................................#..............................#.............#...........
#..........................#........................#...........................................#...........................................
............................................................................................................................................
.....#.......#......#.........................................#.......#.................#...............#..................#................
..............................................................................#.............................................................
.........#.............................#............................................................#.......................................
.....................................................#.......................................#.................#............................
......................#...........................................#..................................................#..................#...
..............#..........................................#.........................#........................................#...............
..........................#.....................#................................................................................#..........
..........................................................................................................#................................#
.......................................#............#...................................#...................................................
#...............#............................................#....................................................#.........................
............................#..................................................................................................#............
............#.........#.................................#.....................#.............................................................
......................................................................................................#.....................................
...#......................................#.........................#.......................................#..............#......#.....#...
..............................................................................................#.............................................
................#.............#.....................#...........................#...........................................................
............................................................................................................................................
.#......#.......................................#...........................................................................................
.............#..........................#........................#..........#....................#..........................................
............................................................................................................................................
............................................................................................................................................
..........................#........#.................................................................#.........................#............
...#.......#..................................................#......................................................................#......
................#...........................................................................................................................
..........................................#............#.......................................................#............#.............#.
............................................................................................................................................
...................#........#....................#...................................#.............................#........................
............................................................................................................................................
............................................................................................................................................
..............#.........#............................#.............#..............#....................#....................................
......................................#.....#............................................................................................#..
......#...........#...........#.........................................#........................#..........................................
.............................................................................................................#........#.....................
..............................................................#...............................................................#.............
..................................#..............#......................................#...................................................
............................................................................................................................................
.............#..............................#..................................................#............................................
...#.................#.................................................#..............................#.....................................
............................................................................................................................................
............................#..........#................#.......................#.................#..........#..............................
...............................................#..................................................................................#.........
..........#........................#........................................................................................................
......................#................................................................................#....................................
#............................................................................................#..........................#................#..
.................#..............#.......#..........#.........................#..................................#...........................
..................................................................#.....#........................#...............................#..........
.........#....................................#............................................................#..........................#.....
..#.........................................................................................................................................
............................................................................................................................................
....................#........................................#.......................#......................................................
.............................#.............................................................#.........#............#.........#.......#.......
..........................................#............#....................................................................................
............................................................................................................................................
.#...............#....................................................#..........#.............................................#............
............#......................................#.....................................#........#.................#.......................
......#.................#........#.....................................................................#...................#................
........................................#......#...............................................................#.......................#....
............................................................................................................................................
..................................................................#.....#...................................................................
.............#............................................................................................#...............................#.
............................................................................................................................................
............................#........................................................................................#.........#............
......................................................#.....................#.................#.............................................
.......................................#................................................#...................................................
............................................#...............................................................................................
.#..............#..................#..............#.............#..............................................#.....................#......
..........................................................#............#...................................................#................
........................#........................................................#..........................................................
....#..............................................................#........#.........#.....................................................
............................#...................................................................#...........................................
........................................#....................................................................#..........#...................
................................#............#..............................................#...............................................
..#......................................................#......#.................................................#...................#.....
...................#...................................................................................#....................................
.............#....................................#..........................................................................#.............#
........#.................................................................#.....#...............#...........................................
..........................................#............#..................................#...............#.................................
......................................................................................................................#.....................
.................................#...................................................#..............................................#.......
.................................................#..........#...............#..............................................#................
#.....#.................#...........................................#.............................#.............#...........................
.................#..........................................................................................................................
........................................................................#.....................#........#.................................#..
..........#...................#..........................#........................................................................#.........
....................................#...........................#.........................................................#.................
..........................#..................#.....................................#........................................................
.....#................................................#..............................................#........#.............................
.............#......................................................#................................................................#......
....................#............#..............#...............................#...............#.........................................#.
...........................................................................................#..............#......#..........................
#..........................................................#................#.........................................#.....................
.........................................#..................................................................................................
......................#..............................#..................................................................................#...
...#..........#....................#..........#...................................#...............................................#.........
.........................................................#..............#...................................................#...............
............................#....................................#.................................#...............#........................
........................................................................................................................#...................
.#...................#......................................................#............#...........................................#.....#
............#.....................................#.........#.........#.....................................................................
.............................................................................................#................#.............................
.................................#.........#............#.......................................................................#...........
...............#.......#.................................................................................#..................................
.................................................................#.......................................................#..........#.......
............................................................................................................................................
............#.....#.........#...............................#..............................#......#..........#..............................
.......................................................#............................#.......................................................
................................#..................................#...................................................#....................
............................................#......#......................#..........................................................#......
.#..............................................................................................#..................#........................`;

let splitted = data.split("\n");
const rowsWithoutGalaxies = [];
const columnsWithoutGalaxies = [];
const columnChecker = splitted[0].split("").reduce((columnChecker, _, i) => {
  columnChecker.set(i, 0);
  return columnChecker;
}, new Map());

for (let i = 0; i < splitted.length; i++) {
  const letters = splitted[i].split("");
  const isRowEmpty = letters.reduce((isRowEmpty, letter, i) => {
    const isLetterEmpty = letter === ".";
    if (isLetterEmpty) columnChecker.set(i, columnChecker.get(i) + 1);
    return isRowEmpty && isLetterEmpty;
  }, true);
  if (!isRowEmpty) {
    continue;
  }
  rowsWithoutGalaxies.push(i);
}

for (let [key, value] of columnChecker) {
  if (value < splitted.length) {
    continue;
  }
  columnsWithoutGalaxies.push(key);
}

let i = 0;
let part1Map = splitted;
for (let rowIndex of rowsWithoutGalaxies) {
  part1Map = [
    ...part1Map.slice(0, rowIndex + i),
    part1Map[rowIndex + i],
    ...part1Map.slice(rowIndex + i),
  ];
  i++;
}

part1Map = part1Map.map((row) => {
  let i = 0;
  let raw = row.split("");
  for (let columnIndex of columnsWithoutGalaxies) {
    raw = [
      ...raw.slice(0, columnIndex + i),
      ".",
      ...raw.slice(columnIndex + i),
    ];
    i++;
  }
  return raw.join("");
});

const part1Uniques = [];
let counter = -1;
const part1MatrixedData = part1Map.map((row, i) =>
  row.split("").map((c, y) => {
    if (c === ".") return c;
    counter++;
    part1Uniques.push({ row: i, column: y, value: counter });
    return counter;
  })
);

counter = -1;
const part2Uniques = [];
const part2MatrixedData = splitted.map((row, i) =>
  row.split("").map((c, y) => {
    if (c === ".") return c;
    counter++;
    part2Uniques.push({ row: i, column: y, value: counter });
    return counter;
  })
);

module.exports.galaxyMap = {
  part1: {
    matrixed: part1MatrixedData,
    uniques: part1Uniques,
  },
  part2: {
    matrixed: part2MatrixedData,
    uniques: part2Uniques,
    rowsWithoutGalaxies,
    columnsWithoutGalaxies,
  },
};
